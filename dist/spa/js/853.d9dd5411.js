"use strict";(globalThis["webpackChunkpp_users_client"]=globalThis["webpackChunkpp_users_client"]||[]).push([[853],{4211:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(1347);const u={__name:"PPInputSingle",props:{dark:Boolean,type:String,placeholder:String},setup(e){const l=e;return(e,a)=>{const u=(0,t.g2)("q-input");return(0,t.uX)(),(0,t.Wv)(u,{dense:"",dark:"",standout:"bg-grey text-white",square:"",type:l.type,placeholder:l.placeholder,class:"text-size","hide-bottom-space":!0},null,8,["type","placeholder"])}}};var s=a(6067),n=a(272),o=a.n(n);const d=u,r=d;o()(u,"components",{QInput:s.A})},4853:(e,l,a)=>{a.r(l),a.d(l,{default:()=>be});a(939),a(6461),a(7008);var t=a(1347),u=a(4187),s=a(8633),n=a(7763),o=a(455),d=a(5311);const r={__name:"PPSearchInput",props:(0,t.zz)({dark:Boolean,placeholder:String,iconName:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=(0,t.fn)(e,"modelValue"),a=e;return(e,u)=>{const s=(0,t.g2)("q-icon"),n=(0,t.g2)("q-input");return(0,t.uX)(),(0,t.Wv)(n,{dark:"",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),square:"",class:"text-size",dense:"",debounce:"300",clearable:"",standout:"bg-grey text-white",placeholder:a.placeholder,style:{margin:"10px",width:"300px"},onClear:u[1]||(u[1]=()=>{l.value=""})},{append:(0,t.k6)(()=>[(0,t.bF)(s,{name:"search"})]),_:1},8,["modelValue","placeholder"])}}};var i=a(6067),c=a(3933),p=a(272),v=a.n(p);const m=r,b=m;v()(r,"components",{QInput:i.A,QIcon:c.A});var k=a(6573);const f={__name:"PPBtnAdd",props:{click:Function,dark:Boolean},setup(e){const l=e;return(e,a)=>((0,t.uX)(),(0,t.Wv)(k.A,{dark:l.dark,label:"Добавить",icon:"add",click:l.click},null,8,["dark","click"]))}},h=f,g=h,y={__name:"PPBtnChange",props:{click:Function},setup(e){const l=e;return(e,a)=>((0,t.uX)(),(0,t.Wv)(k.A,{color:"grey",label:"Редактировать",icon:"edit",click:l.click},null,8,["click"]))}},_=y,V=_,w={__name:"PPBtnDelete",props:{click:Function},setup(e){const l=e;return(e,a)=>((0,t.uX)(),(0,t.Wv)(k.A,{color:"red",label:"Удалить",icon:"delete",click:l.click},null,8,["click"]))}},F=w,A=F,q={__name:"PPDialog",props:{dark:Boolean,model:Object,styleContent:String,label:String},setup(e){const l=e;return(e,a)=>{const u=(0,t.g2)("q-space"),s=(0,t.g2)("q-tooltip"),o=(0,t.g2)("q-btn"),d=(0,t.g2)("q-bar"),r=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-card"),c=(0,t.g2)("q-dialog"),p=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(c,{square:"",dark:""},{default:(0,t.k6)(()=>[(0,t.bF)(i,{class:"pp-light",style:(0,n.Tr)(`${l.styleContent}`)},{default:(0,t.k6)(()=>[(0,t.bF)(d,{dark:"",class:"bg-header-light text-white"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null,(0,n.v_)(l.label),1),(0,t.bF)(u),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(o,{dense:"",square:"",flat:"",icon:"close"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{class:"bg-grey text-white"},{default:(0,t.k6)(()=>a[0]||(a[0]=[(0,t.eW)("Закрыть")])),_:1,__:[0]})]),_:1})),[[p]])]),_:1}),(0,t.bF)(r,{class:"q-pa-none",style:{"overflow-y":"hidden"}},{default:(0,t.k6)(()=>[(0,t.RG)(e.$slots,"default",{class:"'pp-light"})]),_:3})]),_:3},8,["style"])]),_:3})}}};var C=a(2540),Q=a(3341),S=a(343),R=a(5873),U=a(9039),x=a(8387),W=a(222),X=a(8657);const P=q,K=P;v()(q,"components",{QDialog:C.A,QCard:Q.A,QBar:S.A,QSpace:R.A,QBtn:U.A,QTooltip:x.A,QCardSection:W.A}),v()(q,"directives",{ClosePopup:X.A});var $=a(4211);const j={__name:"PPSimpleSelect",props:(0,t.zz)({dark:Boolean,options:Array,update:Function,label:String,inputClass:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=(0,t.fn)(e,"modelValue"),a=e;return(e,u)=>{const s=(0,t.g2)("q-item-label"),o=(0,t.g2)("q-item-section"),d=(0,t.g2)("q-item"),r=(0,t.g2)("q-select");return(0,t.uX)(),(0,t.Wv)(r,{dense:"",dark:"",class:"pp-light",square:"",label:a.label,standout:"bg-grey text-white",modelValue:l.value,"onUpdate:modelValue":[u[0]||(u[0]=e=>l.value=e),a.update],options:a.options,"options-selected-class":"pp-light","popup-content-class":"pp-light"},{"selected-item":(0,t.k6)(e=>[(0,t.Lk)("div",{class:(0,n.C4)(a.inputClass)},(0,n.v_)(e.opt.name),3)]),option:(0,t.k6)(e=>[(0,t.bF)(d,(0,n._B)((0,t.Ng)(e.itemProps)),{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["label","modelValue","options","onUpdate:modelValue"])}}};var L=a(7753),B=a(2589),E=a(4958),z=a(1420);const D=j,T=D;v()(j,"components",{QSelect:L.A,QItem:B.A,QItemSection:E.A,QItemLabel:z.A});const I={__name:"PPPrimitiveSelect",props:(0,t.zz)({dark:Boolean,options:Array,label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=(0,t.fn)(e,"modelValue"),a=e;return(e,u)=>{const s=(0,t.g2)("q-select");return(0,t.uX)(),(0,t.Wv)(s,{dense:"",dark:"",class:"pp-light",square:"",label:a.label,"options-selected-class":"pp-light","popup-content-class":"pp-light",standout:"bg-grey text-white",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),options:a.options},null,8,["label","modelValue","options"])}}},G=I,N=G;v()(I,"components",{QSelect:L.A});const M={class:"row items-center"},O={class:"row justify-between items-center"},Z={key:0,class:"justify-center",style:{color:"red"}},H={key:0,class:"justify-center",style:{color:"red"}},J={key:0,class:"justify-center",style:{color:"red"}},Y={key:0,class:"justify-center",style:{color:"red"}},ee={key:0,class:"justify-center",style:{color:"red"}},le={key:0,class:"justify-center",style:{color:"red"}},ae={key:0,class:"justify-center",style:{color:"red"}},te={key:0,class:"justify-center",style:{color:"red"}},ue={__name:"IndexPage",setup(e){const{getQuery:l,postQuery:a,deleteQuery:r,isAdmin:i}=(0,t.WQ)("store"),c=(0,u.KR)("users"),p=(0,o.rd)(),v=(0,u.KR)([]),m=(0,u.KR)(""),f=(0,u.KR)(""),h=(0,u.KR)(!1),y=[{name:"name",label:"Имя пользователя",align:"left",field:"name",sortable:!0,type:"input"},{name:"email",label:"Email",align:"left",field:"email",sortable:!0},{name:"role",label:"Роль",align:"left",field:"role",format:e=>`${w.value.find(l=>l.value===e).label}`,type:"role",sortable:!0},{name:"branch",label:"Подразделение",align:"left",field:"branch_id",format:e=>`${G(e)}`,sortable:!0,type:"select"},{name:"status",label:"Статус",align:"left",field:"status",format:e=>`${F.value.find(l=>l.value==e).label}`,sortable:!0}],_=[{name:"name",label:"Наименование",align:"left",field:"name",sortable:!0}],w=(0,u.KR)(),F=(0,u.KR)(),q=(0,u.KR)([]),C=(0,u.KR)(!1),Q=(0,u.KR)({value:"user",label:"Пользователь"}),S=(0,u.KR)(!1),R=(0,u.KR)(!1),U=(0,u.KR)(!1),x=(0,u.KR)(!1),W=(0,u.KR)(!1),X=(0,u.KR)(!1),P=(0,u.KR)(""),j=(0,u.KR)(""),L=(0,u.KR)([]),B=(0,u.KR)([]),E=[];for(let e=0;e<y.length;e+=1)E.push({id:e,name:y[e].label});const z=(0,u.KR)(E[0]),D=(0,u.KR)({name:"",password:"",email:"",role:Q,branch_id:q.value[0]}),I=(0,u.KR)();function G(e){const l=q.value.find(l=>l.id===e);if(l)return l.name}function ue(e,l){L.value.length=0,L.value.push(l)}function se(){return d.A.storeVue.state.user}function ne(e,l){B.value.length=0,B.value.push(l)}function oe(e){return v.value.find(l=>l.email===e)}function de(e){return q.value.find(l=>l.name===e)}function re(e){401===e.status||403===e.status?he():409===e.status?m.value="Объект уже существует!":400===e.status||404===e.status?m.value="Невалидные данные!":500===e.status&&(m.value="Ошибка сервера!")}async function ie(){const e={name:String(D.value.name),branch_id:Number(q.value.find(e=>e.name===D.value.branch_id.name).id),email:String(D.value.email),role:String(D.value.role.value),password:String(D.value.password)};try{await a("http://nsk-deb-srv.nevatom.ru:3005/auth/register",e),await ge(),C.value=!1}catch(e){re(e)}}async function ce(){try{await a("http://nsk-deb-srv.nevatom.ru:3005/branches",I.value),await ge(),h.value=!1}catch(e){re(e)}}async function pe(){try{await a(`http://nsk-deb-srv.nevatom.ru:3005/branches/${B.value[0].id}`,{name:String(I.value.name)}),await ge(),X.value=!1}catch(e){re(e)}}async function ve(){console.log(D.value.password);try{await a(`http://nsk-deb-srv.nevatom.ru:3005/users/${L.value[0].id}`,{password:String(D.value.password)}),se().id===L.value[0].id&&he(),S.value=!1}catch(e){re(e)}}async function me(){console.log(se());try{await a(`http://nsk-deb-srv.nevatom.ru:3005/users/${L.value[0].id}`,{name:String(D.value.name)}),await ge(),se().id===L.value[0].id&&he(),U.value=!1}catch(e){re(e)}}async function be(){try{await a(`http://nsk-deb-srv.nevatom.ru:3005/users/${L.value[0].id}`,{branch_id:Number(q.value.find(e=>e.name===D.value.branch_id.name).id)}),se().id===L.value[0].id&&he(),await ge(),x.value=!1}catch(e){re(e)}}async function ke(){console.log(String(D.value.role.value));try{await a(`http://nsk-deb-srv.nevatom.ru:3005/users/${L.value[0].id}`,{role:String(D.value.role.value)}),await ge(),se().id===L.value[0].id&&he(),W.value=!1}catch(e){re(e)}}async function fe(){try{await r(`http://nsk-deb-srv.nevatom.ru:3005/users/${L.value[0].id}`),await ge(),R.value=!1}catch(e){re(e)}}function he(){d.A.storeVue.dispatch("tokenDied").then(()=>{p.replace("/login")})}async function ge(){q.value.length=0,m.value="";try{const[e,a,t,u]=await Promise.all([l("http://nsk-deb-srv.nevatom.ru:3005/branches"),l("http://nsk-deb-srv.nevatom.ru:3005/users/roles"),l("http://nsk-deb-srv.nevatom.ru:3005/users/statuses"),l("http://nsk-deb-srv.nevatom.ru:3005/users")]);q.value=e.data,w.value=a.data,F.value=t.data,200===u.status?(v.value=u.data,console.log(v.value)):401!==u.status&&403!==u.status||he()}catch(e){console.error("Error updating users:",e),he()}}function ye(e){let l=-1;return y.forEach(a=>{a.label===e&&(l=y.indexOf(a))}),l}function _e(e,l,a,t){const u=l?l.toLowerCase():"";return e.filter(e=>[a[ye(z.value.name)]].some(l=>-1!==`${t(l,e)}`.toLowerCase().indexOf(u)))}return(0,t.sV)(()=>{ge(),console.log(se())}),(e,l)=>{const a=(0,t.g2)("q-card-section"),o=(0,t.g2)("q-tab"),d=(0,t.g2)("q-tabs"),r=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-btn"),F=(0,t.g2)("q-td"),G=(0,t.g2)("q-th"),se=(0,t.g2)("q-table"),re=(0,t.g2)("q-tab-panel"),he=(0,t.g2)("q-tab-panels"),ge=(0,t.g2)("q-card"),ye=(0,t.g2)("q-page"),Ve=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(ye,{class:"pp-light"},{default:(0,t.k6)(()=>[(0,t.bF)(a,null,{default:(0,t.k6)(()=>l[34]||(l[34]=[(0,t.Lk)("div",{class:"text-h6"},"Учет пользователей",-1)])),_:1,__:[34]}),(0,t.bF)(d,{"no-caps":"",dense:"",align:"left",dark:"","indicator-color":"transparent",stretch:!0,"active-color":"white","active-bg-color":"grey-8",class:"`pp-bg-dark text-grey no-pa-ma q-ml-md",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e)},{default:(0,t.k6)(()=>[(0,t.bF)(o,{name:"users"},{default:(0,t.k6)(()=>l[35]||(l[35]=[(0,t.eW)(" Пользователи ")])),_:1,__:[35]}),(0,t.bF)(o,{name:"branches"},{default:(0,t.k6)(()=>l[36]||(l[36]=[(0,t.eW)(" Подразделения ")])),_:1,__:[36]})]),_:1},8,["modelValue"]),(0,t.bF)(he,{modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=e=>c.value=e),class:"pp-light"},{default:(0,t.k6)(()=>[(0,t.bF)(re,{name:"users",style:{padding:"0"}},{default:(0,t.k6)(()=>[(0,t.bF)(se,{columns:y,rows:v.value,selected:L.value,"onUpdate:selected":l[6]||(l[6]=e=>L.value=e),selection:"single",filter:P.value,dark:"","body-cell-slot":!0,class:"pp-light fit",onRowClick:ue,style:{"min-width":"800px",height:"900px"},"row-key":"id",flat:"",dense:"","filter-method":_e,"virtual-scroll":"","hide-selected-banner":!0,"rows-per-page-options":[30],separator:"cell","no-results-label":`По запросу '${P.value}' ничего не найдено`,"grid-header":"","wrap-cells":""},{top:(0,t.k6)(()=>[(0,t.bF)(r,{class:"fit row justify-between",style:{padding:"0"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null,[(0,u.R1)(i)()?((0,t.uX)(),(0,t.Wv)(g,{key:0,dark:"",class:"q-mr-sm",onClick:l[1]||(l[1]=()=>{C.value=!0,m.value="",D.value={name:"",password:"",email:"",role:Q.value,branch_id:q.value[0]},f.value=""})})):(0,t.Q3)("",!0),(0,u.R1)(i)()?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(V,{key:1,dark:"",class:"q-mr-sm",label:"Изменить пароль",onClick:l[2]||(l[2]=()=>{S.value=!0,m.value="",f.value="",D.value={name:L.value[0].name,password:L.value[0].password}})},null,512)),[[s.aG,L.value[0]]]):(0,t.Q3)("",!0),(0,u.R1)(i)()?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(A,{key:2,disable:"",dark:"",class:"q-mr-sm",onClick:l[3]||(l[3]=()=>{m.value="",R.value=!0})},null,512)),[[s.aG,L.value[0]]]):(0,t.Q3)("",!0)]),(0,t.Lk)("div",M,[(0,t.bF)(T,{options:E,modelValue:z.value,"onUpdate:modelValue":l[4]||(l[4]=e=>z.value=e)},null,8,["modelValue"]),(0,t.bF)(b,{dark:"",placeholder:"Поиск",modelValue:P.value,"onUpdate:modelValue":l[5]||(l[5]=e=>P.value=e)},null,8,["modelValue"])])]),_:1})]),"body-cell":(0,t.k6)(e=>[(0,t.bF)(F,{props:e,style:{"margin-left":"-20px"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",O,[(0,t.Lk)("div",null,(0,n.v_)(e.value),1),"input"==e.col.type&&(0,u.R1)(i)()?((0,t.uX)(),(0,t.Wv)(p,{key:0,label:"",flat:"",dense:"",color:"white",icon:"edit",onClick:()=>{D.value.name=e.row.name,U.value=!0}},null,8,["onClick"])):(0,t.Q3)("",!0),"select"==e.col.type&&(0,u.R1)(i)()?((0,t.uX)(),(0,t.Wv)(p,{key:1,label:"",flat:"",dense:"",color:"white",icon:"edit",onClick:()=>{D.value.branch_id=q.value.find(l=>e.row.branch_id===l.id),x.value=!0}},null,8,["onClick"])):(0,t.Q3)("",!0),"role"==e.col.type&&(0,u.R1)(i)()?((0,t.uX)(),(0,t.Wv)(p,{key:2,label:"",flat:"",dense:"",color:"white",icon:"edit",onClick:()=>{D.value.role=w.value.find(l=>l.value===e.row.role).label,W.value=!0}},null,8,["onClick"])):(0,t.Q3)("",!0)])]),_:2},1032,["props"])]),"header-cell":(0,t.k6)(e=>[(0,t.bF)(G,{props:e},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.col.label),1)]),_:2},1032,["props"])]),_:1},8,["rows","selected","filter","no-results-label"])]),_:1}),(0,t.bF)(re,{name:"branches",style:{padding:"0"}},{default:(0,t.k6)(()=>[(0,t.bF)(se,{columns:_,rows:q.value,selected:B.value,"onUpdate:selected":l[11]||(l[11]=e=>B.value=e),selection:"single",filter:j.value,dark:"","body-cell-slot":!0,class:"pp-light full-width",onRowClick:ne,style:{"min-width":"800px"},"row-key":"id",flat:"",dense:"","filter-method":_e,"virtual-scroll":"","hide-selected-banner":!0,"rows-per-page-options":[30],separator:"cell","no-results-label":`По запросу '${P.value}' ничего не найдено`,"grid-header":"","wrap-cells":""},{top:(0,t.k6)(()=>[(0,t.bF)(r,{class:"fit row justify-between",style:{padding:"0"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null,[(0,u.R1)(i)()?((0,t.uX)(),(0,t.Wv)(g,{key:0,dark:"",class:"q-mr-sm",onClick:l[7]||(l[7]=()=>{h.value=!0,m.value="",I.value={name:""}})})):(0,t.Q3)("",!0),(0,u.R1)(i)()?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(V,{key:1,dark:"",class:"q-mr-sm",onClick:l[8]||(l[8]=()=>{X.value=!0,m.value="",I.value={name:B.value[0].name}})},null,512)),[[s.aG,B.value[0]]]):(0,t.Q3)("",!0),(0,u.R1)(i)()?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(A,{key:2,disable:"",dark:"",class:"q-mr-sm",onClick:l[9]||(l[9]=()=>{m.value="",e.dialogDeleteBranch=!0})},null,512)),[[s.aG,B.value[0]]]):(0,t.Q3)("",!0)]),(0,t.bF)(b,{dark:"",placeholder:"Поиск",modelValue:P.value,"onUpdate:modelValue":l[10]||(l[10]=e=>P.value=e)},null,8,["modelValue"])]),_:1})]),"body-cell":(0,t.k6)(e=>[(0,t.bF)(F,{props:e,style:{"margin-left":"-20px"}},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.value),1)]),_:2},1032,["props"])]),"header-cell":(0,t.k6)(e=>[(0,t.bF)(G,{props:e},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.col.label),1)]),_:2},1032,["props"])]),_:1},8,["rows","selected","filter","no-results-label"])]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:C.value,"onUpdate:modelValue":l[19]||(l[19]=e=>C.value=e),label:"Добавить пользователя",styleContent:"width: 600px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light q-pa-sm"},{default:(0,t.k6)(()=>[(0,t.bF)(a,null,{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(ie,["prevent"])},[(0,t.bF)($.A,{label:"Имя пользователя",class:"q-ma-md",modelValue:D.value.name,"onUpdate:modelValue":l[13]||(l[13]=e=>D.value.name=e),rules:[e=>e.length>0||"Имя пользователя не может быть пустым"]},null,8,["modelValue","rules"]),(0,t.bF)($.A,{label:"Email",class:"q-ma-md",modelValue:D.value.email,"onUpdate:modelValue":l[14]||(l[14]=e=>D.value.email=e),type:"email",rules:[e=>e.length>0||"Email не может быть пустым",e=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||"Email должен содержать @ и только английские буквы",e=>!oe(e)||"Пользователь с таким email уже существует"]},null,8,["modelValue","rules"]),(0,t.bF)($.A,{label:"Пароль",class:"q-ma-md",modelValue:D.value.password,"onUpdate:modelValue":l[15]||(l[15]=e=>D.value.password=e),dark:"",rules:[e=>e.length>0||"Пароль не может быть пустым"]},null,8,["modelValue","rules"]),(0,t.bF)($.A,{label:"Подтвердить пароль",class:"q-ma-md",modelValue:f.value,"onUpdate:modelValue":l[16]||(l[16]=e=>f.value=e),dark:"",rules:[e=>e.length>0&&e===D.value.password||"Пароль не совпадает"]},null,8,["modelValue","rules"]),(0,t.bF)(T,{label:"Подразделение",class:"q-ma-md",modelValue:D.value.branch_id,"onUpdate:modelValue":l[17]||(l[17]=e=>D.value.branch_id=e),options:q.value},null,8,["modelValue","options"]),(0,t.bF)(N,{label:"Роль",class:"q-ma-md",modelValue:D.value.role,"onUpdate:modelValue":l[18]||(l[18]=e=>D.value.role=e),options:w.value},null,8,["modelValue","options"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Создать",type:"submit",disable:!D.value.name||!D.value.email||!D.value.password||D.value.password!=f.value||oe(D.value.email)},null,8,["disable"])]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",Z,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:S.value,"onUpdate:modelValue":l[22]||(l[22]=e=>S.value=e),label:"Изменить пароль",styleContent:"width: 600px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light q-pa-sm"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{class:"no-ma"},{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(ve,["prevent"])},[(0,t.bF)($.A,{label:"Пароль",class:"q-ma-md",modelValue:D.value.password,"onUpdate:modelValue":l[20]||(l[20]=e=>D.value.password=e),dark:"",rules:[e=>""!=e||"Пароль не может быть пустым"]},null,8,["modelValue","rules"]),(0,t.bF)($.A,{label:"Подтвердить пароль",class:"q-ma-md",modelValue:f.value,"onUpdate:modelValue":l[21]||(l[21]=e=>f.value=e),dark:"",rules:[e=>""!=e&&e===D.value.password||"Пароль не совпадает"]},null,8,["modelValue","rules"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Сохранить",type:"submit",disable:!D.value.password||!f.value||D.value.password!=f.value},null,8,["disable"])]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",H,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:R.value,"onUpdate:modelValue":l[23]||(l[23]=e=>R.value=e),label:"Удалить пользователя",styleContent:"width: 400px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light q-pa-sm"},{default:(0,t.k6)(()=>[l[37]||(l[37]=(0,t.Lk)("div",null,"Вы уверены?",-1)),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Да",onClick:fe}),(0,t.bo)((0,t.bF)(k.A,{label:"Отмена"},null,512),[[Ve]])]),_:1}),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",J,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1,__:[37]})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:h.value,"onUpdate:modelValue":l[25]||(l[25]=e=>h.value=e),label:"Добавить подразделение",styleContent:"width: 500px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light q-pa-sm"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{class:"no-ma"},{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(ce,["prevent"])},[(0,t.bF)($.A,{label:"Название подразделения",class:"q-ma-md",modelValue:I.value.name,"onUpdate:modelValue":l[24]||(l[24]=e=>I.value.name=e),rules:[e=>e.length>0||"Название подразделения не может быть пустым",e=>!de(e)||"Подразделение с таким названием уже существует"]},null,8,["modelValue","rules"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Создать",type:"submit",disable:!I.value.name||de(I.value.name)},null,8,["disable"])]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",Y,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:X.value,"onUpdate:modelValue":l[27]||(l[27]=e=>X.value=e),label:"Изменить название подразделения",styleContent:"width: 500px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light q-pa-sm"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{class:"no-ma"},{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(pe,["prevent"])},[(0,t.bF)($.A,{label:"Название подразделения",class:"q-ma-md",modelValue:I.value.name,"onUpdate:modelValue":l[26]||(l[26]=e=>I.value.name=e),rules:[e=>e.length>0||"Название подразделения не может быть пустым"]},null,8,["modelValue","rules"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Изменить",type:"submit",disable:!I.value.name},null,8,["disable"])]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",ee,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:U.value,"onUpdate:modelValue":l[29]||(l[29]=e=>U.value=e),label:"Изменить имя пользователя",styleContent:"width: 400px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{class:"no-ma"},{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(me,["prevent"])},[(0,t.bF)($.A,{label:"Имя пользователя",class:"q-ma-md",modelValue:D.value.name,"onUpdate:modelValue":l[28]||(l[28]=e=>D.value.name=e),rules:[e=>e.length>0||"Название подразделения не может быть пустым"]},null,8,["modelValue","rules"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Изменить",type:"submit",disable:!D.value.name},null,8,["disable"])]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",le,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:x.value,"onUpdate:modelValue":l[31]||(l[31]=e=>x.value=e),label:"Выбор подразделения",styleContent:"width: 400px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{class:"no-ma"},{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(be,["prevent"])},[(0,t.bF)(T,{label:"Подразделение",class:"q-ma-md",modelValue:D.value.branch_id,"onUpdate:modelValue":l[30]||(l[30]=e=>D.value.branch_id=e),options:q.value},null,8,["modelValue","options"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Изменить",type:"submit"})]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",ae,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(K,{persistent:"",modelValue:W.value,"onUpdate:modelValue":l[33]||(l[33]=e=>W.value=e),label:"Изменение роли",styleContent:"width: 400px; overflow-y: hidden;"},{default:(0,t.k6)(()=>[(0,t.bF)(ge,{class:"dark pp-light"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{class:"no-ma"},{default:(0,t.k6)(()=>[(0,t.Lk)("form",{onSubmit:(0,s.D$)(ke,["prevent"])},[(0,t.bF)(N,{label:"Роль",class:"q-ma-md",modelValue:D.value.role,"onUpdate:modelValue":l[32]||(l[32]=e=>D.value.role=e),options:w.value},null,8,["modelValue","options"]),(0,t.bF)(r,{class:"justify-center"},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,{label:"Изменить",type:"submit"})]),_:1})],32),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",te,(0,n.v_)(m.value),1)):(0,t.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};var se=a(5013),ne=a(8805),oe=a(3467),de=a(990),re=a(9851),ie=a(3059),ce=a(5034),pe=a(8785),ve=a(2517);const me=ue,be=me;v()(ue,"components",{QPage:se.A,QCardSection:W.A,QTabs:ne.A,QTab:oe.A,QTabPanels:de.A,QTabPanel:re.A,QTable:ie.A,QCardActions:ce.A,QTd:pe.A,QBtn:U.A,QTh:ve.A,QCard:Q.A}),v()(ue,"directives",{ClosePopup:X.A})},6573:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(1347);const u={__name:"PPBtn",props:{click:Function,label:String,color:String,icon:String,dark:Boolean},setup(e){const l=e;return(e,a)=>{const u=(0,t.g2)("q-btn");return(0,t.uX)(),(0,t.Wv)(u,{"no-caps":"",class:"text-size",color:"grey-9",dark:"",square:"",dense:"",label:l.label,icon:l.icon,onClick:l.click},{default:(0,t.k6)(()=>[(0,t.RG)(e.$slots,"default")]),_:3},8,["label","icon","onClick"])}}};var s=a(9039),n=a(272),o=a.n(n);const d=u,r=d;o()(u,"components",{QBtn:s.A})}}]);